<!DOCTYPE html>
<html ng-app="idbsDemo" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    
    <base href="/idbs-demo-webapp/"/>
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" />
	<link rel="stylesheet" href="resources/css/idbsDemo.css"/>
	
	<title>IdBS Demo App</title>
</head>

<body ng-controller="IdbsDemoController">
	
	<div ng-include="'resources/public/partials/navbar.html'"></div>
	
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-2">
				<div class="well">
					<h4>
						<span class="glyphicon glyphicon-user sidepanel-glyph"></span><a ng-click="changePanel('identities')" class="btn-link sidepanel-link">Identities</a>
						<span class="badge pull-right">{{currentUser ? 1 + boundUsers.length : 0}}</span>
					</h4>
					<h4>
						<span class="glyphicon glyphicon-picture sidepanel-glyph"></span><a ng-click="changePanel('photos')" class="btn-link sidepanel-link">Photos</a>
						<span class="badge pull-right">{{resources.length}}</span>
					</h4>
				</div>
			</div>
			
			<div class="col-sm-10">
				<div ng-show="viewBoundUsers" class="well">
					<div class="row">	
						<div class="col-sm-1">
							<h2><span class="glyphicon glyphicon-exclamation-sign pull-right"></span></h2>
						</div>
						<div class="col-sm-11">	
							<h3>Detected {{boundUsers.length}} other users bound to this account:</h3>
							<ul class="list-unstyled bound-users-list">
								<li ng-repeat="u in boundUsers">
									<h4 class="text-primary">{{u.userInfo.name}}</h4>
									<h5 class="text-muted">{{u.subject}} @ {{u.issuer}}</h5>
								</li>
							</ul>
							<h3>Show their content?</h3>
							<div class="row" style="margin-left: 0px;">
								<button ng-click="boundUsersResponse(true)" class="btn btn-success">Yes</button>
								<button ng-click="boundUsersResponse(false)" class="btn btn-danger">Not now</button>
							</div>
							<h5>Note: This behavior can be configured later in the "Identities" tab.</h5>
						</div>
					</div>
				</div>
				
				<div ng-include="'resources/public/partials/identitiesPanel.html'"></div>
				
				<div ng-include="'resources/public/partials/photosPanel.html'"></div>
				
				<div ng-hide="currentUser" class='well'>
					<div class="row">
						<div class="col-sm-12">
							<h2>You are not logged in</h2>
							<h4>Please log in to access your content.</h4>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<script src="https://code.angularjs.org/1.3.16/angular.min.js"></script>
	
	<script src="resources/js/main.js"></script>
	<script src="resources/js/userInfoService.js"></script>
</body>
</html>
